<div class="preheader">
  <span class='name'>
    <%= item.list.account.full_name %>
  </span>
  <span>
    <%= render partial: 'list_item/priority_icon', locals: { item: item } %>

    <% if item.url.present? %>
      <span class='me-2'></span>
      <%= link_to item.url, class: 'item-link', data: { toggle: 'tooltip', placement: 'top'}, title: 'Gift URL', target: '_blank' do %>
        <i class="fa-solid fa-link icon"></i>
      <% end %>
    <% end %>
  </span>
</div>
<div class='claimed-by'>
  <% if item.bought? && !item.bought_by?(current_account) %>
    Bought by <strong><%= item.claimed_by.full_name %></strong>
  <% elsif item.is_claimed? && !item.claimed_by?(current_account) %>
    Claimed by <strong><%= item.claimed_by.full_name %></strong>
  <% end %>
</div>

<div class='d-block d-md-none mobile-claim-message-container'>
</div>

<%= link_to show_list_item_path(item.id), class: 'no-link-style', remote: true do %> 
  <div class="head">
    <div class='truncated-text'>
      <p class='white-space-preline'><%= item.description.truncate(200, omission: '...') %></p>
    </div>
  </div>
<% end %>

<% if item.tags.present? %>
  <%= link_to show_list_item_path(item.id), class: 'action view-item', data: { toggle: 'tooltip', placement: 'top'}, title: 'This item is tagged', remote: true do %>
    <span class="fa-stack fa-2x icon-tag">
      <i class="fa-solid fa-circle fa-stack-2x icon-bg"></i>
      <i class="fa-solid fa-tag fa-stack-1x fa-inverse icon-fg"></i>
    </span>
  <% end %>
<% end %>

<div class="body">
  <%= render partial: 'list_item/price_range', locals: { item: item } %>
  <span class='d-flex flex-row'>
    <% if item.bought_by?(current_account) %>
      <%= render partial: 'list_item/statuses/bought', locals: { item: item } %>
    <% elsif item.claimed_by?(current_account) %>
      <%= render partial: 'list_item/statuses/claimed', locals: { item: item, disabled: false } %>
    <% elsif !item.claimed? %>
      <%= render partial: 'list_item/statuses/unclaimed', locals: { item: item } %>
    <% end %>
  </span>
</div>

<div class='blur'></div>
